"use strict";(global.webpackChunktrilium=global.webpackChunktrilium||[]).push([[475],{2475:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(8481),l=a(1412),i=a(1801),d=a(3152),s=a(1736);class o{constructor(e,t){this.treeWidget=e,this.node=t}async show(e){i.Z.show({x:e.pageX,y:e.pageY,items:await this.getMenuItems(),selectMenuItemHandler:(e,t)=>this.selectMenuItemHandler(e)})}async getMenuItems(){const e=await l.default.getNote(this.node.data.noteId),t=this.node.getParent().data.noteId,a="_lbVisibleLaunchers"===e.noteId,n="_lbAvailableLaunchers"===e.noteId,i="_lbVisibleLaunchers"===t,d="_lbAvailableLaunchers"===t,s=i||d,o=!e.noteId.startsWith("_");return[a||n?{title:"Add a note launcher",command:"addNoteLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"Add a script launcher",command:"addScriptLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"Add a custom widget",command:"addWidgetLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"Add spacer",command:"addSpacerLauncher",uiIcon:"bx bx-plus"}:null,a||n?{title:"----"}:null,{title:'Delete <kbd data-command="deleteNotes"></kbd>',command:"deleteNotes",uiIcon:"bx bx-trash",enabled:o},{title:"Reset",command:"resetLauncher",uiIcon:"bx bx-empty",enabled:!o&&e.isLaunchBarConfig()},{title:"----"},d?{title:"Move to visible launchers",command:"moveLauncherToVisible",uiIcon:"bx bx-show",enabled:!0}:null,i?{title:"Move to available launchers",command:"moveLauncherToAvailable",uiIcon:"bx bx-hide",enabled:!0}:null,{title:'Duplicate launcher <kbd data-command="duplicateSubtree">',command:"duplicateSubtree",uiIcon:"bx bx-empty",enabled:s}].filter((e=>null!==e))}async selectMenuItemHandler({command:e}){"resetLauncher"!==e?this.treeWidget.triggerCommand(e,{node:this.node,notePath:n.Z.getNotePath(this.node),selectedOrActiveBranchIds:this.treeWidget.getSelectedOrActiveBranchIds(this.node),selectedOrActiveNoteIds:this.treeWidget.getSelectedOrActiveNoteIds(this.node)}):await d.Z.confirm(`Do you really want to reset "${this.node.title}"? \n                       All data / settings in this note (and its children) will be lost \n                       and the launcher will be returned to its original location.`)&&await s.Z.post(`special-notes/launchers/${this.node.data.noteId}/reset`)}}}}]);
//# sourceMappingURL=475.js.map